implements the intermediate stage:
1. return types
2. previews