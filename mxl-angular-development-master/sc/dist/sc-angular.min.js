/**
 * @license sc-angular v0.6.4
 * (c) 2015 Sebis
 * License: Sebis Proprietary
 * https://bitbucket.org/sebischair/sc-angular
 */
!function(){angular.module("sociocortex",["ngStorage","ngResource"]);var a="http://server.sociocortex.com";angular.module("sociocortex").value("scConnection",{baseUri:a,apiVersion:"v1"}),angular.module("sociocortex").config(["$sceDelegateProvider",function(b){b.resourceUrlWhitelist(["self",a+"/api/**"])}])}(),function(){angular.module("sociocortex").service("scAuth",["$localStorage","$q","$http","scUtil",function(a,b,c,d){function e(){return a.userDetails}function f(b,c){return a.credentials={user:b,password:c},g().then(function(b){return a.userDetails=b.data,b.data},function(b){delete a.credentials,delete a.userDetails})}function g(){return j(),b(function(a,b){c({url:d.getFullUrl(d.paths.usersMe),method:"GET"}).then(a,b)})}function h(){delete a.credentials,delete a.userDetails}function i(){return!!a.userDetails}function j(){a.credentials?c.defaults.headers.common.Authorization="Basic "+window.btoa(""+a.credentials.user+":"+a.credentials.password):delete c.defaults.headers.common.Authorization}return{getUser:e,login:f,logout:h,isAuthenticated:i,setAuthorizationHeader:j}}])}(),function(){angular.module("sociocortex").service("scData",["$resource","scUtil","scAuth",function(a,b,c){c.setAuthorizationHeader();var d=a(b.getFullUrl(b.paths.entities+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.entities),isArray:!0},queryByWorkspace:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entities),isArray:!0},getAttributes:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.attributes),isArray:!0}});d.objectifyAttributes=function(a){function b(a){var b={};return a.attributes&&angular.isArray(a.attributes)&&angular.forEach(a.attributes,function(a){b[a.name]=1===a.values.length?a.values[0]:a.values}),a.attributes=b,a}if(angular.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}return b(a)},d.arrayifyAttributes=function(a){function b(a){var b=[];return a.attributes&&angular.isObject(a.attributes)&&angular.forEach(a.attributes,function(a,c){angular.isArray(a)?b.push({name:c,values:a}):b.push({name:c,values:[a]})}),a.attributes=b,a}if(angular.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}return b(a)},delete d.query;var e=a(b.getFullUrl(b.paths.workspaces+"/:id"),{id:"@id"},{update:{method:"PUT"},getEntities:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entities),isArray:!0},getEntityTypes:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entityTypes),isArray:!0}}),f=a(b.getFullUrl(b.paths.attributes+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntity:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.attributes),isArray:!0}});return delete f.query,{Entity:d,Workspace:e,Attribute:f}}])}(),function(){angular.module("sociocortex").service("scModel",["$resource","scUtil","scAuth",function(a,b,c){c.setAuthorizationHeader();var d=a(b.getFullUrl(b.paths.entityTypes+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByWorkspace:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entityTypes),isArray:!0},getAttributeDefinitions:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.attributeDefinitions),isArray:!0},getEntities:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.entities),isArray:!0}});delete d.query;var e=a(b.getFullUrl(b.paths.attributeDefinitions+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.attributeDefinitions),isArray:!0}});return delete e.query,{EntityType:d,AttributeDefinition:e}}])}(),function(){angular.module("sociocortex").service("scMxl",["$cacheFactory","$q","$http","scAuth","scUtil",function(a,b,c,d,e){function f(a,c,d,e){var f,g,h,k;angular.isObject(a)?(f=a,angular.isString(c)?(g=c,h=d,k=e):(h=c,k=d)):angular.isString(a)?(restriciton=a,h=c,k=d):angular.isFunction(a)?(h=a,k=c):(f=a,g=c,h=d,k=e);var l=j.get(JSON.stringify(f));return l?(log({cache:l}),b(l)):i({httpMethod:"GET",context:f,mxlMethod:"mxlAutoCompletionHints",params:{restrict:g}},function(a){return j.put(JSON.stringify(f),a),h(a)},k)}function g(a,b,c,d){var e,f,g,h;return angular.isObject(a)&&angular.isObject(b)?(e=a,f=b,g=c,h=d):angular.isObject(a)&&angular.isFunction(b)?(f=a,g=b,h=c):(e=a,restriction=b,g=c,h=d),i({httpMethod:"POST",context:e,mxlMethod:"mxlQuery",data:f},g,h)}function h(a,b,c,d){var e,f,g,h;return angular.isObject(a)&&angular.isObject(b)?(e=a,f=b,g=c,h=d):angular.isObject(a)&&angular.isFunction(b)?(f=a,g=b,h=c):(e=a,restriction=b,g=c,h=d),i({httpMethod:"POST",context:e,mxlMethod:"mxlValidation",data:f},g,h)}function i(a,b,d){var f="";return a.context&&(a.context.entity?f=e.paths.entities+"/"+a.context.entity.id+"/":a.context.entityType?f=e.paths.entityTypes+"/"+a.context.entityType.id+"/":a.context.workspace&&(f=e.paths.workspaces+"/"+a.context.workspace.id+"/")),f=e.getFullUrl(f+a.mxlMethod),c({method:a.httpMethod,url:f,data:a.data,params:a.params}).then(function(a){return b(a.data)},function(a){return d?d(a.data):void 0})}var j=a("mxlAutoCompleteCache");return d.setAuthorizationHeader(),{autoComplete:f,query:g,validate:h}}])}(),function(){angular.module("sociocortex").service("scPrincipal",["$resource","scUtil","scAuth",function(a,b,c){c.setAuthorizationHeader();var d=a(b.getFullUrl(b.paths.users+"/:id"),{id:"@id"},{update:{method:"PUT"},picture:{method:"GET",url:b.getFullUrl(b.paths.users+"/:id/picture")},me:{method:"GET",url:b.getFullUrl(b.paths.usersMe)},myPicture:{method:"GET",url:b.getFullUrl(b.paths.usersMe+"/picture")}}),e=a(b.getFullUrl(b.paths.groups+"/:id"),{id:"@id"},{update:{method:"PUT"}});return{User:d,Group:e}}])}(),function(){angular.module("sociocortex").service("scUtil",["scConnection",function(a){function b(a,b){return angular.isObject(a)&&a.href&&a.href.indexOf("/"+b+"/")>0}function c(b,c){return"/"===b.charAt(b.length-1)&&(b=b.substr(0,b.length-1)),"/"===c.charAt(0)&&(c=c.substr(1,a.baseUri.length-1)),b+"/"+c}return{getFullUrl:function(b){return c(c(a.baseUri,"api/"+a.apiVersion),b)},paths:{entities:"entities",attributes:"attributes",entityTypes:"entityTypes",attributeDefinitions:"attributeDefinitions",workspaces:"workspaces",users:"users",usersMe:"users/me",groups:"groups"},isEntity:function(a){return b(a,this.paths.entities)},isAttribute:function(a){return b(a,this.paths.attributes)},isEntityType:function(a){return b(a,this.paths.entityTypes)},isAttributeDefinition:function(a){return b(a,this.paths.attributeDefinitions)},isWorkspace:function(a){return b(a,this.paths.workspaces)},isUser:function(a){return b(a,this.paths.users)},isGroup:function(a){return b(a,this.paths.groups)}}}])}();